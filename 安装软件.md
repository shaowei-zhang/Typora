# Linuxä¸Šé…ç½®ç¯å¢ƒã€å®‰è£…è½¯ä»¶

### 1ã€å®‰è£…docker

1ã€å¦‚æœä¹‹å‰å®‰è£…è¿‡æ—§ç‰ˆæœ¬çš„Dockerï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¸è½½ï¼š

```
yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-selinux \
                  docker-engine-selinux \
                  docker-engine \
                  docker-ce
```

2ã€å®‰è£…åŒ…

```
yum install -y yum-utils
```

3ã€è®¾ç½®é•œåƒçš„ä»“åº“

```
yum-config-manager \
--add-repo \
http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
```

æ›´æ–°è½¯ä»¶åŒ…çš„ç´¢å¼•

```
yum makecache fast
```



4ã€å®‰è£…dockerçš„ç›¸å…³çš„éƒ¨ä»¶

```
yum install docker-ce docker-ce-cli containerd.io
```

5ã€å¯åŠ¨docker

```
systemctl start docker
###å¦‚æœå‡ºç°å¯åŠ¨ä¸€åŠæŠ¥é”™çš„æƒ…å†µ
service docker start	
```

6ã€éªŒè¯æˆåŠŸå®‰è£…

```
docker version
```



7ã€å¦‚éœ€è¦ï¼ˆå¸è½½é•œåƒï¼‰

```

yum remove docker-ce docker-ce-cli containerd.io

rm -rf /var/lib/docker 
```



8**é…ç½®é•œåƒåŠ é€Ÿ**

é’ˆå¯¹Dockerå®¢æˆ·ç«¯ç‰ˆæœ¬å¤§äº 1.10.0 çš„ç”¨æˆ·

æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶/etc/docker/daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨

```

sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://kpzuswvi.mirror.aliyuncs.com"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```











è®¾ç½®dockerå¼€æœºå¯åŠ¨ï¼ˆå¯å¿½ç•¥ï¼‰

```
å¯¹äº Linux ç³»ç»Ÿï¼ˆä½¿ç”¨ systemdï¼‰
ç¼–è¾‘ä½ çš„ Docker æœåŠ¡å•å…ƒæ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€ï¼š


sudo nano /etc/systemd/system/docker.service
æˆ–

sudo vim /etc/systemd/system/docker.service
åœ¨ [Service] éƒ¨åˆ†æ·»åŠ  --restart é€‰é¡¹ï¼Œå¯ä»¥é€‰æ‹© always æˆ– unless-stoppedï¼š


ExecStart=/usr/bin/dockerd --restart always
æˆ–


ExecStart=/usr/bin/dockerd --restart unless-stopped
ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚

é‡æ–°åŠ è½½ systemd é…ç½®ï¼š


sudo systemctl daemon-reload
é‡å¯ Docker æœåŠ¡ï¼š


sudo systemctl restart docker
éªŒè¯ Docker æ˜¯å¦åœ¨å¼€æœºæ—¶å¯åŠ¨ï¼š


sudo systemctl is-active docker
å¦‚æœè¾“å‡ºä¸º activeï¼Œåˆ™è¡¨ç¤º Docker å·²æˆåŠŸè®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ã€‚
```







### 2ã€å®‰è£…nginx

âœ… æ­¥éª¤ï¼šå®‰è£… Nginx åˆ° `/home/ky/nginx`

1. å®‰è£…ç¼–è¯‘ä¾èµ–

```
sudo yum install -y gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel
```

------

2. ä¸‹è½½å¹¶è§£å‹ Nginx æºç 

```
curl -O http://nginx.org/download/nginx-1.24.0.tar.gz
tar -zxvf nginx-1.24.0.tar.gz
cd nginx-1.24.0
```

ä½ ä¹Ÿå¯ä»¥ä»å®˜ç½‘æŸ¥æ‰¾æœ€æ–°ç‰ˆï¼šhttp://nginx.org/en/download.html

------

3. é…ç½®å®‰è£…è·¯å¾„

```
./configure \
--prefix=/home/ky/nginx \
--with-http_ssl_module \
--with-http_stub_status_module \
--with-http_gzip_static_module
```

------

4. ç¼–è¯‘å¹¶å®‰è£…

```
make
make install
```

------

ğŸ“ å®‰è£…å®Œæˆåç»“æ„å¦‚ä¸‹ï¼š

| ç±»å‹     | è·¯å¾„                                |
| -------- | ----------------------------------- |
| å¯åŠ¨å‘½ä»¤ | `/home/ky/nginx/sbin/nginx`         |
| é…ç½®æ–‡ä»¶ | `/home/ky/nginx/conf/nginx.conf`    |
| é»˜è®¤ç½‘é¡µ | `/home/ky/nginx/html/index.html`    |
| æ—¥å¿—æ–‡ä»¶ | `/home/ky/nginx/logs/access.log` ç­‰ |